---
---
title: "population_wrangle"
output: pdf_document
---
```{r}
library(acs)
big_geo <- geo.make(state = 36, county = c("Albany", "Rensselaer", "Saratoga", "Orange", "Dutchess", "Erie", "Monroe"))
bigPop <- acs.fetch(geo = big_geo, endyear = 2015, span = 5, table.number ="B01003")
bigPop
```

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
library(acs)
bigIncome <- acs.fetch(geo =big_geo, endyear = 2015,table.number =  "B19013")
bigIncome
```

## Including Plots

You can also embed plots, for example:


```{r}
library(dplyr)

merged <- as.data.frame(bigPop@estimate) %>% 
  mutate(county_full = rownames(.),
         county = str_replace(county_full,"(.+) County.*","\\1") %>% tolower) %>% 
  select(county,B01003_001) %>% 
  rename("population 2015" = B01003_001) 
merged

str(merged)
```

```{r}
library(acs)
pastPop<- acs.fetch(geo =big_geo, endyear = 2010, table.number = "B01003")
pastPop
past_income <-acs.fetch(geo =big_geo, endyear = 2010, table.number = "B19013")
past_income
str(past_income)
```

```{r}
library(acs)
past_population <- as.data.frame(pastPop@estimate) %>% 
  mutate(county_full = rownames(.),
         county = str_replace(county_full,"(.+) County.*","\\1") %>% tolower) %>% 
  select(county,B01003_001) %>% 
  rename("population 2010" =B01003_001) 
past_population
```

```{r}
Big_income <- as.data.frame(bigIncome@estimate) %>% 
  mutate(county_full = rownames(.),
         county = str_replace(county_full,"(.+) County.*","\\1") %>% tolower) %>% 
  select(county,B19013_001) %>% 
  rename("Median Income 2015" =B19013_001) 
Big_income

Past_income <- as.data.frame(past_income@estimate) %>% 
  mutate(county_full = rownames(.),
         county = str_replace(county_full,"(.+) County.*","\\1") %>% tolower) %>% 
  select(county,B19013_001) %>% 
  rename("Median Income 2010" = B19013_001) 
Past_income
```

```{r}
Merged_ACS <- past_population %>%
  inner_join(merged, by = "county") %>%
  inner_join(Past_income, by = "county") %>%
  inner_join(Big_income, by = "county") 
merged_ACS
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
